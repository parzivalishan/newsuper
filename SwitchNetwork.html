<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Chain Network Switcher</title>
    <style>
        .button-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            padding: 20px;
        }
        .network-button {
            padding: 10px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
            border: 1px solid #ccc;
            background: #f5f5f5;
            transition: all 0.3s;
        }
        .network-button:hover {
            background: #e0e0e0;
        }
        .status {
            margin: 20px;
            padding: 10px;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <button id="connectBtn">Connect MetaMask</button>
    <div id="accountInfo"></div>
    <div id="status" class="status"></div>
    <div class="button-container" id="networkButtons"></div>

    <script>
        const networks = {
            1: {
                name: 'Ethereum Mainnet',
                chainId: '0x1',
                rpcUrl: 'https://mainnet.infura.io/v3/your-api-key',
                symbol: 'ETH',
                explorer: 'https://etherscan.io'
            },
            10: {
                name: 'Optimism',
                chainId: '0xA',
                rpcUrl: 'https://mainnet.optimism.io',
                symbol: 'ETH',
                explorer: 'https://optimistic.etherscan.io'
            },
            250: {
                name: 'Fantom',
                chainId: '0xFA',
                rpcUrl: 'https://rpc.ftm.tools',
                symbol: 'FTM',
                explorer: 'https://ftmscan.com'
            },
            43114: {
                name: 'Avalanche',
                chainId: '0xA86A',
                rpcUrl: 'https://api.avax.network/ext/bc/C/rpc',
                symbol: 'AVAX',
                explorer: 'https://snowtrace.io'
            },
            42161: {
                name: 'Arbitrum One',
                chainId: '0xA4B1',
                rpcUrl: 'https://arb1.arbitrum.io/rpc',
                symbol: 'ETH',
                explorer: 'https://arbiscan.io'
            },
            59144: {
                name: 'Linea',
                chainId: '0xE708',
                rpcUrl: 'https://rpc.linea.build',
                symbol: 'ETH',
                explorer: 'https://lineascan.build'
            },
            137: {
                name: 'Polygon',
                chainId: '0x89',
                rpcUrl: 'https://polygon-rpc.com',
                symbol: 'MATIC',
                explorer: 'https://polygonscan.com'
            },
            8453: {
                name: 'Base',
                chainId: '0x2105',
                rpcUrl: 'https://mainnet.base.org',
                symbol: 'ETH',
                explorer: 'https://basescan.org'
            },
            56: {
                name: 'BNB Chain',
                chainId: '0x38',
                rpcUrl: 'https://bsc-dataseed1.binance.org',
                symbol: 'BNB',
                explorer: 'https://bscscan.com'
            },
            1946: {
                name: 'Minato',
                chainId: '0x79A',
                rpcUrl: 'https://rpc.minato.soneium.org',
                symbol: 'ETH',
                explorer: 'https://minato.soneium.org'
            }
        };

        let provider = null;
        let account = null;

        async function connectWallet() {
            try {
                if (typeof window.ethereum === 'undefined') {
                    showStatus('Please install MetaMask!', 'error');
                    return;
                }

                provider = window.ethereum;
                const accounts = await provider.request({ method: 'eth_requestAccounts' });
                account = accounts[0];
                
                document.getElementById('accountInfo').innerHTML = `
                    <h3>Connected Account:</h3> 
                    <p>${account}</p>
                `;
                
                createNetworkButtons();
                setupEventListeners();
                showStatus('Wallet connected successfully!', 'success');

            } catch (error) {
                console.error('Connection error:', error);
                showStatus('Failed to connect wallet', 'error');
            }
        }

        function createNetworkButtons() {
            const container = document.getElementById('networkButtons');
            container.innerHTML = '';

            Object.entries(networks).forEach(([id, network]) => {
                const button = document.createElement('button');
                button.className = 'network-button';
                button.innerHTML = `Switch to ${network.name}`;
                button.onclick = () => switchNetwork(network);
                container.appendChild(button);
            });
        }

        async function switchNetwork(network) {
            try {
                await provider.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: network.chainId }],
                });
                showStatus(`Switched to ${network.name}`, 'success');
            } catch (switchError) {
                if (switchError.code === 4902) {
                    try {
                        await provider.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: network.chainId,
                                chainName: network.name,
                                nativeCurrency: {
                                    name: network.symbol,
                                    symbol: network.symbol,
                                    decimals: 18
                                },
                                rpcUrls: [network.rpcUrl],
                                blockExplorerUrls: [network.explorer]
                            }]
                        });
                        showStatus(`Added and switched to ${network.name}`, 'success');
                    } catch (addError) {
                        console.error('Error adding network:', addError);
                        showStatus(`Failed to add ${network.name}`, 'error');
                    }
                }
            }
        }

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function setupEventListeners() {
            provider.on('chainChanged', (chainId) => {
                const networkName = networks[parseInt(chainId, 16)]?.name || 'Unknown Network';
                showStatus(`Network changed to ${networkName}`, 'success');
            });

            provider.on('accountsChanged', (accounts) => {
                account = accounts[0];
                document.getElementById('accountInfo').innerHTML = `
                    <h3>Connected Account:</h3> 
                    <p>${account}</p>
                `;
            });
        }

        document.getElementById('connectBtn').addEventListener('click', connectWallet);
    </script>
</body>
</html>
